{"ast":null,"code":"var _jsxFileName = \"/home/piyush/Desktop/collabdraw/realtime-workspace/client/src/components/VideoCall.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect, useState } from 'react';\nimport { useWebRTC } from '../webrtc/useWebRTC';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst VideoCall = ({\n  socket,\n  users\n}) => {\n  _s();\n  const localVideoRef = useRef(null);\n  const [localStream, setLocalStream] = useState(null);\n  const [isVideoEnabled, setIsVideoEnabled] = useState(true);\n  const [isAudioEnabled, setIsAudioEnabled] = useState(true);\n  const {\n    remoteStreams,\n    startCall,\n    endCall\n  } = useWebRTC(socket, localStream);\n  useEffect(() => {\n    // Get user media\n    navigator.mediaDevices.getUserMedia({\n      video: true,\n      audio: true\n    }).then(stream => {\n      setLocalStream(stream);\n      if (localVideoRef.current) {\n        localVideoRef.current.srcObject = stream;\n      }\n    }).catch(err => {\n      console.error('Error accessing media devices:', err);\n    });\n    return () => {\n      if (localStream) {\n        localStream.getTracks().forEach(track => track.stop());\n      }\n    };\n  }, []);\n  const toggleVideo = () => {\n    if (localStream) {\n      const videoTrack = localStream.getVideoTracks()[0];\n      if (videoTrack) {\n        videoTrack.enabled = !videoTrack.enabled;\n        setIsVideoEnabled(videoTrack.enabled);\n      }\n    }\n  };\n  const toggleAudio = () => {\n    if (localStream) {\n      const audioTrack = localStream.getAudioTracks()[0];\n      if (audioTrack) {\n        audioTrack.enabled = !audioTrack.enabled;\n        setIsAudioEnabled(audioTrack.enabled);\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white rounded-lg shadow-lg p-4 max-w-sm\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative\",\n        children: [/*#__PURE__*/_jsxDEV(\"video\", {\n          ref: localVideoRef,\n          autoPlay: true,\n          muted: true,\n          playsInline: true,\n          className: \"w-full h-32 object-cover rounded bg-gray-900\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute bottom-2 left-2 text-white text-xs bg-black bg-opacity-50 px-2 py-1 rounded\",\n          children: \"You\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this), Object.entries(remoteStreams).map(([userId, stream]) => {\n        const user = users.find(u => u.id === userId);\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative\",\n          children: [/*#__PURE__*/_jsxDEV(\"video\", {\n            autoPlay: true,\n            playsInline: true,\n            className: \"w-full h-32 object-cover rounded bg-gray-900\",\n            ref: el => {\n              if (el) el.srcObject = stream;\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute bottom-2 left-2 text-white text-xs bg-black bg-opacity-50 px-2 py-1 rounded\",\n            children: (user === null || user === void 0 ? void 0 : user.username) || 'Anonymous'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 15\n          }, this)]\n        }, userId, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 13\n        }, this);\n      }), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-center space-x-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: toggleVideo,\n          className: `p-2 rounded-full ${isVideoEnabled ? 'bg-gray-200 hover:bg-gray-300' : 'bg-red-500 hover:bg-red-600 text-white'}`,\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"w-5 h-5\",\n            fill: \"currentColor\",\n            viewBox: \"0 0 20 20\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: toggleAudio,\n          className: `p-2 rounded-full ${isAudioEnabled ? 'bg-gray-200 hover:bg-gray-300' : 'bg-red-500 hover:bg-red-600 text-white'}`,\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"w-5 h-5\",\n            fill: \"currentColor\",\n            viewBox: \"0 0 20 20\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              fillRule: \"evenodd\",\n              d: \"M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z\",\n              clipRule: \"evenodd\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n};\n_s(VideoCall, \"vgXxj4oDY/SbGbeCuCJYKq06U0c=\", false, function () {\n  return [useWebRTC];\n});\n_c = VideoCall;\nexport default VideoCall;\nvar _c;\n$RefreshReg$(_c, \"VideoCall\");","map":{"version":3,"names":["React","useRef","useEffect","useState","useWebRTC","jsxDEV","_jsxDEV","VideoCall","socket","users","_s","localVideoRef","localStream","setLocalStream","isVideoEnabled","setIsVideoEnabled","isAudioEnabled","setIsAudioEnabled","remoteStreams","startCall","endCall","navigator","mediaDevices","getUserMedia","video","audio","then","stream","current","srcObject","catch","err","console","error","getTracks","forEach","track","stop","toggleVideo","videoTrack","getVideoTracks","enabled","toggleAudio","audioTrack","getAudioTracks","className","children","ref","autoPlay","muted","playsInline","fileName","_jsxFileName","lineNumber","columnNumber","Object","entries","map","userId","user","find","u","id","el","username","onClick","fill","viewBox","d","fillRule","clipRule","_c","$RefreshReg$"],"sources":["/home/piyush/Desktop/collabdraw/realtime-workspace/client/src/components/VideoCall.js"],"sourcesContent":["import React, { useRef, useEffect, useState } from 'react';\nimport { useWebRTC } from '../webrtc/useWebRTC';\n\nconst VideoCall = ({ socket, users }) => {\n  const localVideoRef = useRef(null);\n  const [localStream, setLocalStream] = useState(null);\n  const [isVideoEnabled, setIsVideoEnabled] = useState(true);\n  const [isAudioEnabled, setIsAudioEnabled] = useState(true);\n  \n  const { remoteStreams, startCall, endCall } = useWebRTC(socket, localStream);\n\n  useEffect(() => {\n    // Get user media\n    navigator.mediaDevices.getUserMedia({\n      video: true,\n      audio: true\n    })\n    .then(stream => {\n      setLocalStream(stream);\n      if (localVideoRef.current) {\n        localVideoRef.current.srcObject = stream;\n      }\n    })\n    .catch(err => {\n      console.error('Error accessing media devices:', err);\n    });\n\n    return () => {\n      if (localStream) {\n        localStream.getTracks().forEach(track => track.stop());\n      }\n    };\n  }, []);\n\n  const toggleVideo = () => {\n    if (localStream) {\n      const videoTrack = localStream.getVideoTracks()[0];\n      if (videoTrack) {\n        videoTrack.enabled = !videoTrack.enabled;\n        setIsVideoEnabled(videoTrack.enabled);\n      }\n    }\n  };\n\n  const toggleAudio = () => {\n    if (localStream) {\n      const audioTrack = localStream.getAudioTracks()[0];\n      if (audioTrack) {\n        audioTrack.enabled = !audioTrack.enabled;\n        setIsAudioEnabled(audioTrack.enabled);\n      }\n    }\n  };\n\n  return (\n    <div className=\"bg-white rounded-lg shadow-lg p-4 max-w-sm\">\n      <div className=\"space-y-4\">\n        {/* Local Video */}\n        <div className=\"relative\">\n          <video\n            ref={localVideoRef}\n            autoPlay\n            muted\n            playsInline\n            className=\"w-full h-32 object-cover rounded bg-gray-900\"\n          />\n          <div className=\"absolute bottom-2 left-2 text-white text-xs bg-black bg-opacity-50 px-2 py-1 rounded\">\n            You\n          </div>\n        </div>\n\n        {/* Remote Videos */}\n        {Object.entries(remoteStreams).map(([userId, stream]) => {\n          const user = users.find(u => u.id === userId);\n          return (\n            <div key={userId} className=\"relative\">\n              <video\n                autoPlay\n                playsInline\n                className=\"w-full h-32 object-cover rounded bg-gray-900\"\n                ref={el => {\n                  if (el) el.srcObject = stream;\n                }}\n              />\n              <div className=\"absolute bottom-2 left-2 text-white text-xs bg-black bg-opacity-50 px-2 py-1 rounded\">\n                {user?.username || 'Anonymous'}\n              </div>\n            </div>\n          );\n        })}\n\n        {/* Controls */}\n        <div className=\"flex justify-center space-x-2\">\n          <button\n            onClick={toggleVideo}\n            className={`p-2 rounded-full ${\n              isVideoEnabled\n                ? 'bg-gray-200 hover:bg-gray-300'\n                : 'bg-red-500 hover:bg-red-600 text-white'\n            }`}\n          >\n            <svg className=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n              <path d=\"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z\" />\n            </svg>\n          </button>\n          \n          <button\n            onClick={toggleAudio}\n            className={`p-2 rounded-full ${\n              isAudioEnabled\n                ? 'bg-gray-200 hover:bg-gray-300'\n                : 'bg-red-500 hover:bg-red-600 text-white'\n            }`}\n          >\n            <svg className=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n              <path fillRule=\"evenodd\" d=\"M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z\" clipRule=\"evenodd\" />\n            </svg>\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default VideoCall;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}