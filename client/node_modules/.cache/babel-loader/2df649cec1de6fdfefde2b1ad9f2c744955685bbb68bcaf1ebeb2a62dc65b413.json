{"ast":null,"code":"var _jsxFileName = \"/home/piyush/Desktop/collabdraw/realtime-workspace/client/src/components/Canvas.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect, useState, useCallback } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Canvas = ({\n  socket,\n  workspaceData\n}) => {\n  _s();\n  const canvasRef = useRef(null);\n  const [isDrawing, setIsDrawing] = useState(false);\n  const [tool, setTool] = useState('pen');\n  const [color, setColor] = useState('#000000');\n  const [brushSize, setBrushSize] = useState(5);\n  const [lastPoint, setLastPoint] = useState(null);\n  const colors = ['#000000', '#FF0000', '#00FF00', '#0000FF', '#FFFF00', '#FF00FF', '#00FFFF', '#FFA500', '#800080', '#FFC0CB'];\n  const brushSizes = [2, 5, 10, 15, 20];\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    const ctx = canvas.getContext('2d');\n    const resizeCanvas = () => {\n      const rect = canvas.parentElement.getBoundingClientRect();\n      canvas.width = rect.width;\n      canvas.height = rect.height;\n      ctx.lineCap = 'round';\n      ctx.lineJoin = 'round';\n    };\n    resizeCanvas();\n    window.addEventListener('resize', resizeCanvas);\n    return () => {\n      window.removeEventListener('resize', resizeCanvas);\n    };\n  }, []);\n  const drawOnCanvas = useCallback(data => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    const ctx = canvas.getContext('2d');\n    if (data.type === 'clear') {\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      return;\n    }\n\n    // Set drawing properties\n    ctx.globalCompositeOperation = data.tool === 'eraser' ? 'destination-out' : 'source-over';\n    ctx.strokeStyle = data.tool === 'eraser' ? 'rgba(0,0,0,1)' : data.color;\n    ctx.lineWidth = data.brushSize;\n    ctx.lineCap = 'round';\n    ctx.lineJoin = 'round';\n    if (data.type === 'start') {\n      ctx.beginPath();\n      ctx.moveTo(data.x, data.y);\n      // Draw a small dot for single clicks\n      ctx.lineTo(data.x + 0.1, data.y + 0.1);\n      ctx.stroke();\n    } else if (data.type === 'draw') {\n      if (data.prevX !== undefined && data.prevY !== undefined) {\n        ctx.beginPath();\n        ctx.moveTo(data.prevX, data.prevY);\n        ctx.lineTo(data.x, data.y);\n        ctx.stroke();\n      } else {\n        ctx.lineTo(data.x, data.y);\n        ctx.stroke();\n      }\n    } else if (data.type === 'end') {\n      ctx.beginPath();\n    }\n  }, []);\n  useEffect(() => {\n    if (!(workspaceData !== null && workspaceData !== void 0 && workspaceData.drawingHistory) || !canvasRef.current) return;\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    workspaceData.drawingHistory.forEach(action => {\n      drawOnCanvas(action);\n    });\n  }, [workspaceData, drawOnCanvas]);\n  useEffect(() => {\n    if (!socket) return;\n    socket.on('draw-event', data => {\n      drawOnCanvas(data);\n    });\n    socket.on('canvas-clear', () => {\n      const canvas = canvasRef.current;\n      if (canvas) {\n        const ctx = canvas.getContext('2d');\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n      }\n    });\n    return () => {\n      socket.off('draw-event');\n      socket.off('canvas-clear');\n    };\n  }, [socket, drawOnCanvas]);\n  const getCanvasPoint = e => {\n    const canvas = canvasRef.current;\n    const rect = canvas.getBoundingClientRect();\n    const scaleX = canvas.width / rect.width;\n    const scaleY = canvas.height / rect.height;\n\n    // Handle both mouse and touch events\n    const clientX = e.clientX || (e.touches && e.touches[0] ? e.touches[0].clientX : 0);\n    const clientY = e.clientY || (e.touches && e.touches[0] ? e.touches[0].clientY : 0);\n    return {\n      x: (clientX - rect.left) * scaleX,\n      y: (clientY - rect.top) * scaleY\n    };\n  };\n  const startDrawing = e => {\n    console.log('Start drawing triggered'); // Debug log\n    setIsDrawing(true);\n    const point = getCanvasPoint(e);\n    setLastPoint(point);\n    const drawData = {\n      type: 'start',\n      x: point.x,\n      y: point.y,\n      tool,\n      color,\n      brushSize\n    };\n    drawOnCanvas(drawData);\n    socket === null || socket === void 0 ? void 0 : socket.emit('draw-event', drawData);\n  };\n  const draw = e => {\n    if (!isDrawing) return;\n    console.log('Drawing...'); // Debug log\n\n    const point = getCanvasPoint(e);\n    const drawData = {\n      type: 'draw',\n      x: point.x,\n      y: point.y,\n      prevX: lastPoint === null || lastPoint === void 0 ? void 0 : lastPoint.x,\n      prevY: lastPoint === null || lastPoint === void 0 ? void 0 : lastPoint.y,\n      tool,\n      color,\n      brushSize\n    };\n    setLastPoint(point);\n    drawOnCanvas(drawData);\n    socket === null || socket === void 0 ? void 0 : socket.emit('draw-event', drawData);\n  };\n  const stopDrawing = () => {\n    if (!isDrawing) return;\n    console.log('Stop drawing'); // Debug log\n\n    setIsDrawing(false);\n    setLastPoint(null);\n    const drawData = {\n      type: 'end',\n      tool,\n      color,\n      brushSize\n    };\n    socket === null || socket === void 0 ? void 0 : socket.emit('draw-event', drawData);\n  };\n  const clearCanvas = () => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    const ctx = canvas.getContext('2d');\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    socket === null || socket === void 0 ? void 0 : socket.emit('draw-event', {\n      type: 'clear'\n    });\n  };\n  const handleMouseMove = e => {\n    if (isDrawing) {\n      draw(e);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex-1 flex flex-col bg-white\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-gray-100 border-b border-gray-200 p-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-6 flex-wrap\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"text-sm font-medium text-gray-700\",\n            children: \"Tool:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setTool('pen'),\n            className: `px-3 py-1 rounded text-sm ${tool === 'pen' ? 'bg-blue-500 text-white' : 'bg-white text-gray-700 border border-gray-300'}`,\n            children: \"\\u270F\\uFE0F Pen\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setTool('eraser'),\n            className: `px-3 py-1 rounded text-sm ${tool === 'eraser' ? 'bg-blue-500 text-white' : 'bg-white text-gray-700 border border-gray-300'}`,\n            children: \"\\uD83E\\uDDFD Eraser\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 11\n        }, this), tool === 'pen' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"text-sm font-medium text-gray-700\",\n            children: \"Color:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex space-x-1\",\n            children: colors.map(c => /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setColor(c),\n              className: `w-6 h-6 rounded border-2 ${color === c ? 'border-gray-800' : 'border-gray-300'}`,\n              style: {\n                backgroundColor: c\n              }\n            }, c, false, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"color\",\n            value: color,\n            onChange: e => setColor(e.target.value),\n            className: \"w-8 h-8 border border-gray-300 rounded\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"text-sm font-medium text-gray-700\",\n            children: \"Size:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex space-x-1\",\n            children: brushSizes.map(size => /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setBrushSize(size),\n              className: `px-2 py-1 rounded text-xs ${brushSize === size ? 'bg-blue-500 text-white' : 'bg-white text-gray-700 border border-gray-300'}`,\n              children: [size, \"px\"]\n            }, size, true, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"range\",\n            min: \"1\",\n            max: \"50\",\n            value: brushSize,\n            onChange: e => setBrushSize(parseInt(e.target.value)),\n            className: \"w-20\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-sm text-gray-600\",\n            children: [brushSize, \"px\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: clearCanvas,\n          className: \"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 text-sm\",\n          children: \"\\uD83D\\uDDD1\\uFE0F Clear\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 relative overflow-hidden\",\n      children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: canvasRef,\n        className: \"absolute inset-0 cursor-crosshair\",\n        onMouseDown: startDrawing,\n        onMouseMove: handleMouseMove,\n        onMouseUp: stopDrawing,\n        onMouseLeave: stopDrawing,\n        onTouchStart: e => {\n          e.preventDefault();\n          startDrawing(e);\n        },\n        onTouchMove: e => {\n          e.preventDefault();\n          handleMouseMove(e);\n        },\n        onTouchEnd: e => {\n          e.preventDefault();\n          stopDrawing();\n        },\n        style: {\n          cursor: tool === 'pen' ? 'crosshair' : 'pointer',\n          touchAction: 'none'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 207,\n    columnNumber: 5\n  }, this);\n};\n_s(Canvas, \"Ln1GERjdw6zsNoX2yNAJ5zIYOKI=\");\n_c = Canvas;\nexport default Canvas;\nvar _c;\n$RefreshReg$(_c, \"Canvas\");","map":{"version":3,"names":["React","useRef","useEffect","useState","useCallback","jsxDEV","_jsxDEV","Canvas","socket","workspaceData","_s","canvasRef","isDrawing","setIsDrawing","tool","setTool","color","setColor","brushSize","setBrushSize","lastPoint","setLastPoint","colors","brushSizes","canvas","current","ctx","getContext","resizeCanvas","rect","parentElement","getBoundingClientRect","width","height","lineCap","lineJoin","window","addEventListener","removeEventListener","drawOnCanvas","data","type","clearRect","globalCompositeOperation","strokeStyle","lineWidth","beginPath","moveTo","x","y","lineTo","stroke","prevX","undefined","prevY","drawingHistory","forEach","action","on","off","getCanvasPoint","e","scaleX","scaleY","clientX","touches","clientY","left","top","startDrawing","console","log","point","drawData","emit","draw","stopDrawing","clearCanvas","handleMouseMove","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","map","c","style","backgroundColor","value","onChange","target","size","min","max","parseInt","ref","onMouseDown","onMouseMove","onMouseUp","onMouseLeave","onTouchStart","preventDefault","onTouchMove","onTouchEnd","cursor","touchAction","_c","$RefreshReg$"],"sources":["/home/piyush/Desktop/collabdraw/realtime-workspace/client/src/components/Canvas.js"],"sourcesContent":["import React, { useRef, useEffect, useState, useCallback } from 'react';\n\nconst Canvas = ({ socket, workspaceData }) => {\n  const canvasRef = useRef(null);\n  const [isDrawing, setIsDrawing] = useState(false);\n  const [tool, setTool] = useState('pen');\n  const [color, setColor] = useState('#000000');\n  const [brushSize, setBrushSize] = useState(5);\n  const [lastPoint, setLastPoint] = useState(null);\n\n  const colors = [\n    '#000000', '#FF0000', '#00FF00', '#0000FF', '#FFFF00',\n    '#FF00FF', '#00FFFF', '#FFA500', '#800080', '#FFC0CB'\n  ];\n\n  const brushSizes = [2, 5, 10, 15, 20];\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n\n    const ctx = canvas.getContext('2d');\n    \n    const resizeCanvas = () => {\n      const rect = canvas.parentElement.getBoundingClientRect();\n      canvas.width = rect.width;\n      canvas.height = rect.height;\n      \n      ctx.lineCap = 'round';\n      ctx.lineJoin = 'round';\n    };\n\n    resizeCanvas();\n    window.addEventListener('resize', resizeCanvas);\n\n    return () => {\n      window.removeEventListener('resize', resizeCanvas);\n    };\n  }, []);\n\n  const drawOnCanvas = useCallback((data) => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n\n    const ctx = canvas.getContext('2d');\n    \n    if (data.type === 'clear') {\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      return;\n    }\n    \n    // Set drawing properties\n    ctx.globalCompositeOperation = data.tool === 'eraser' ? 'destination-out' : 'source-over';\n    ctx.strokeStyle = data.tool === 'eraser' ? 'rgba(0,0,0,1)' : data.color;\n    ctx.lineWidth = data.brushSize;\n    ctx.lineCap = 'round';\n    ctx.lineJoin = 'round';\n\n    if (data.type === 'start') {\n      ctx.beginPath();\n      ctx.moveTo(data.x, data.y);\n      // Draw a small dot for single clicks\n      ctx.lineTo(data.x + 0.1, data.y + 0.1);\n      ctx.stroke();\n    } else if (data.type === 'draw') {\n      if (data.prevX !== undefined && data.prevY !== undefined) {\n        ctx.beginPath();\n        ctx.moveTo(data.prevX, data.prevY);\n        ctx.lineTo(data.x, data.y);\n        ctx.stroke();\n      } else {\n        ctx.lineTo(data.x, data.y);\n        ctx.stroke();\n      }\n    } else if (data.type === 'end') {\n      ctx.beginPath();\n    }\n  }, []);\n\n  useEffect(() => {\n    if (!workspaceData?.drawingHistory || !canvasRef.current) return;\n\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    \n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    \n    workspaceData.drawingHistory.forEach((action) => {\n      drawOnCanvas(action);\n    });\n  }, [workspaceData, drawOnCanvas]);\n\n  useEffect(() => {\n    if (!socket) return;\n\n    socket.on('draw-event', (data) => {\n      drawOnCanvas(data);\n    });\n\n    socket.on('canvas-clear', () => {\n      const canvas = canvasRef.current;\n      if (canvas) {\n        const ctx = canvas.getContext('2d');\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n      }\n    });\n\n    return () => {\n      socket.off('draw-event');\n      socket.off('canvas-clear');\n    };\n  }, [socket, drawOnCanvas]);\n\n  const getCanvasPoint = (e) => {\n    const canvas = canvasRef.current;\n    const rect = canvas.getBoundingClientRect();\n    const scaleX = canvas.width / rect.width;\n    const scaleY = canvas.height / rect.height;\n\n    // Handle both mouse and touch events\n    const clientX = e.clientX || (e.touches && e.touches[0] ? e.touches[0].clientX : 0);\n    const clientY = e.clientY || (e.touches && e.touches[0] ? e.touches[0].clientY : 0);\n\n    return {\n      x: (clientX - rect.left) * scaleX,\n      y: (clientY - rect.top) * scaleY\n    };\n  };\n\n  const startDrawing = (e) => {\n    console.log('Start drawing triggered'); // Debug log\n    setIsDrawing(true);\n    const point = getCanvasPoint(e);\n    setLastPoint(point);\n\n    const drawData = {\n      type: 'start',\n      x: point.x,\n      y: point.y,\n      tool,\n      color,\n      brushSize\n    };\n\n    drawOnCanvas(drawData);\n    socket?.emit('draw-event', drawData);\n  };\n\n  const draw = (e) => {\n    if (!isDrawing) return;\n    console.log('Drawing...'); // Debug log\n\n    const point = getCanvasPoint(e);\n    \n    const drawData = {\n      type: 'draw',\n      x: point.x,\n      y: point.y,\n      prevX: lastPoint?.x,\n      prevY: lastPoint?.y,\n      tool,\n      color,\n      brushSize\n    };\n\n    setLastPoint(point);\n    drawOnCanvas(drawData);\n    socket?.emit('draw-event', drawData);\n  };\n\n  const stopDrawing = () => {\n    if (!isDrawing) return;\n    console.log('Stop drawing'); // Debug log\n    \n    setIsDrawing(false);\n    setLastPoint(null);\n\n    const drawData = {\n      type: 'end',\n      tool,\n      color,\n      brushSize\n    };\n\n    socket?.emit('draw-event', drawData);\n  };\n\n  const clearCanvas = () => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n\n    const ctx = canvas.getContext('2d');\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n    socket?.emit('draw-event', {\n      type: 'clear'\n    });\n  };\n\n  const handleMouseMove = (e) => {\n    if (isDrawing) {\n      draw(e);\n    }\n  };\n\n  return (\n    <div className=\"flex-1 flex flex-col bg-white\">\n      <div className=\"bg-gray-100 border-b border-gray-200 p-4\">\n        <div className=\"flex items-center space-x-6 flex-wrap\">\n          <div className=\"flex items-center space-x-2\">\n            <label className=\"text-sm font-medium text-gray-700\">Tool:</label>\n            <button\n              onClick={() => setTool('pen')}\n              className={`px-3 py-1 rounded text-sm ${\n                tool === 'pen'\n                  ? 'bg-blue-500 text-white'\n                  : 'bg-white text-gray-700 border border-gray-300'\n              }`}\n            >\n              ✏️ Pen\n            </button>\n            <button\n              onClick={() => setTool('eraser')}\n              className={`px-3 py-1 rounded text-sm ${\n                tool === 'eraser'\n                  ? 'bg-blue-500 text-white'\n                  : 'bg-white text-gray-700 border border-gray-300'\n              }`}\n            >\n              🧽 Eraser\n            </button>\n          </div>\n\n          {tool === 'pen' && (\n            <div className=\"flex items-center space-x-2\">\n              <label className=\"text-sm font-medium text-gray-700\">Color:</label>\n              <div className=\"flex space-x-1\">\n                {colors.map((c) => (\n                  <button\n                    key={c}\n                    onClick={() => setColor(c)}\n                    className={`w-6 h-6 rounded border-2 ${\n                      color === c ? 'border-gray-800' : 'border-gray-300'\n                    }`}\n                    style={{ backgroundColor: c }}\n                  />\n                ))}\n              </div>\n              <input\n                type=\"color\"\n                value={color}\n                onChange={(e) => setColor(e.target.value)}\n                className=\"w-8 h-8 border border-gray-300 rounded\"\n              />\n            </div>\n          )}\n\n          <div className=\"flex items-center space-x-2\">\n            <label className=\"text-sm font-medium text-gray-700\">Size:</label>\n            <div className=\"flex space-x-1\">\n              {brushSizes.map((size) => (\n                <button\n                  key={size}\n                  onClick={() => setBrushSize(size)}\n                  className={`px-2 py-1 rounded text-xs ${\n                    brushSize === size\n                      ? 'bg-blue-500 text-white'\n                      : 'bg-white text-gray-700 border border-gray-300'\n                  }`}\n                >\n                  {size}px\n                </button>\n              ))}\n            </div>\n            <input\n              type=\"range\"\n              min=\"1\"\n              max=\"50\"\n              value={brushSize}\n              onChange={(e) => setBrushSize(parseInt(e.target.value))}\n              className=\"w-20\"\n            />\n            <span className=\"text-sm text-gray-600\">{brushSize}px</span>\n          </div>\n\n          <button\n            onClick={clearCanvas}\n            className=\"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 text-sm\"\n          >\n            🗑️ Clear\n          </button>\n        </div>\n      </div>\n\n      <div className=\"flex-1 relative overflow-hidden\">\n        <canvas\n          ref={canvasRef}\n          className=\"absolute inset-0 cursor-crosshair\"\n          onMouseDown={startDrawing}\n          onMouseMove={handleMouseMove}\n          onMouseUp={stopDrawing}\n          onMouseLeave={stopDrawing}\n          onTouchStart={(e) => {\n            e.preventDefault();\n            startDrawing(e);\n          }}\n          onTouchMove={(e) => {\n            e.preventDefault();\n            handleMouseMove(e);\n          }}\n          onTouchEnd={(e) => {\n            e.preventDefault();\n            stopDrawing();\n          }}\n          style={{\n            cursor: tool === 'pen' ? 'crosshair' : 'pointer',\n            touchAction: 'none'\n          }}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default Canvas;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}